<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Ordem de Servi√ßo - Oficina Mec√¢nica</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üöó Nova Ordem de Servi√ßo</h1>
            <p class="subtitle">Sistema de Gest√£o de Oficina Mec√¢nica</p>
        </header>

        <form id="formOS" class="form-os">
            
            <!-- SE√á√ÉO: CLIENTE -->
            <section class="form-section">
                <h2 class="section-title">üë§ Cliente</h2>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="cliente">Cliente *</label>
                        <div class="input-with-button">
                            <select id="cliente" name="cliente_id" required>
                                <option value="">Selecione um cliente...</option>
                            </select>
                            <button type="button" class="btn-secondary" id="btnNovoCliente">
                                + Novo
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Modal Novo Cliente (oculto inicialmente) -->
                <div id="modalCliente" class="modal-inline hidden">
                    <h3>Cadastro R√°pido de Cliente</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clienteNome">Nome Completo *</label>
                            <input type="text" id="clienteNome" placeholder="Nome do cliente">
                        </div>
                        <div class="form-group">
                            <label for="clienteCpfCnpj">CPF/CNPJ *</label>
                            <input type="text" id="clienteCpfCnpj" placeholder="000.000.000-00" maxlength="18">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clienteTelefone">Telefone *</label>
                            <input type="text" id="clienteTelefone" placeholder="(00) 00000-0000" maxlength="15">
                        </div>
                        <div class="form-group">
                            <label for="clienteEmail">E-mail</label>
                            <input type="email" id="clienteEmail" placeholder="cliente@email.com">
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="btnCancelarCliente">Cancelar</button>
                        <button type="button" class="btn-primary" id="btnSalvarCliente">Salvar Cliente</button>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO: VE√çCULO -->
            <section class="form-section">
                <h2 class="section-title">üöô Ve√≠culo</h2>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="veiculo">Ve√≠culo *</label>
                        <div class="input-with-button">
                            <select id="veiculo" name="veiculo_id" required disabled>
                                <option value="">Selecione um cliente primeiro...</option>
                            </select>
                            <button type="button" class="btn-secondary" id="btnNovoVeiculo" disabled>
                                + Novo
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Modal Novo Ve√≠culo (oculto inicialmente) -->
                <div id="modalVeiculo" class="modal-inline hidden">
                    <h3>Cadastro R√°pido de Ve√≠culo</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="veiculoPlaca">Placa *</label>
                            <input type="text" id="veiculoPlaca" placeholder="ABC-1234 ou ABC1D23" maxlength="8">
                        </div>
                        <div class="form-group">
                            <label for="veiculoMarca">Marca *</label>
                            <input type="text" id="veiculoMarca" placeholder="Ex: Volkswagen">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="veiculoModelo">Modelo *</label>
                            <input type="text" id="veiculoModelo" placeholder="Ex: Gol">
                        </div>
                        <div class="form-group">
                            <label for="veiculoAno">Ano *</label>
                            <input type="number" id="veiculoAno" placeholder="2020" min="1900" max="2026">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="veiculoCor">Cor</label>
                            <input type="text" id="veiculoCor" placeholder="Ex: Branco">
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="btnCancelarVeiculo">Cancelar</button>
                        <button type="button" class="btn-primary" id="btnSalvarVeiculo">Salvar Ve√≠culo</button>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO: DADOS DA OS -->
            <section class="form-section">
                <h2 class="section-title">üìã Dados da Ordem de Servi√ßo</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="mecanico">Mec√¢nico Respons√°vel *</label>
                        <select id="mecanico" name="mecanico_id" required>
                            <option value="">Selecione um mec√¢nico...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dataAbertura">Data de Abertura *</label>
                        <input type="date" id="dataAbertura" name="data_abertura" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="status">Status *</label>
                        <select id="status" name="status" required>
                            <option value="Aguardando">Aguardando</option>
                            <option value="Em Andamento">Em Andamento</option>
                            <option value="Conclu√≠da">Conclu√≠da</option>
                            <option value="Pago">Pago</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dataConclusao">Data de Conclus√£o</label>
                        <input type="date" id="dataConclusao" name="data_conclusao">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="descricaoProblema">Descri√ß√£o do Problema *</label>
                        <textarea id="descricaoProblema" name="descricao_problema" rows="3" 
                                  placeholder="Descreva o problema relatado pelo cliente..." required></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="observacoes">Observa√ß√µes Adicionais</label>
                        <textarea id="observacoes" name="observacoes" rows="2" 
                                  placeholder="Observa√ß√µes gerais sobre o servi√ßo..."></textarea>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO: SERVI√áOS -->
            <section class="form-section">
                <h2 class="section-title">‚öôÔ∏è Servi√ßos</h2>
                
                <div class="add-item-container">
                    <select id="selectServico" class="select-item">
                        <option value="">Selecione um servi√ßo...</option>
                    </select>
                    <button type="button" class="btn-add" id="btnAdicionarServico">+ Adicionar</button>
                </div>

                <div id="listaServicos" class="items-list">
                    <p class="empty-message">Nenhum servi√ßo adicionado</p>
                </div>
            </section>

            <!-- SE√á√ÉO: PE√áAS -->
            <section class="form-section">
                <h2 class="section-title">üîß Pe√ßas</h2>
                
                <div class="add-item-container">
                    <input type="text" id="buscaPeca" class="input-search" 
                           placeholder="Buscar pe√ßa por nome ou c√≥digo...">
                    <div id="resultadosBusca" class="autocomplete-results hidden"></div>
                </div>

                <div id="listaPecas" class="items-list">
                    <p class="empty-message">Nenhuma pe√ßa adicionada</p>
                </div>
            </section>

            <!-- SE√á√ÉO: VALORES -->
            <section class="form-section">
                <h2 class="section-title">üí∞ Valores</h2>
                
                <div class="resumo-valores">
                    <div class="valor-item">
                        <span>Valor dos Servi√ßos:</span>
                        <strong id="valorServicos">R$ 0,00</strong>
                    </div>
                    <div class="valor-item">
                        <span>Valor das Pe√ßas:</span>
                        <strong id="valorPecas">R$ 0,00</strong>
                    </div>
                    <div class="valor-item">
                        <span>Subtotal:</span>
                        <strong id="subtotal">R$ 0,00</strong>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="desconto">Desconto (R$)</label>
                        <input type="number" id="desconto" name="desconto" 
                               value="0" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="formaPagamento">Forma de Pagamento</label>
                        <select id="formaPagamento" name="forma_pagamento">
                            <option value="">Selecione...</option>
                            <option value="Dinheiro">Dinheiro</option>
                            <option value="Cart√£o">Cart√£o</option>
                            <option value="PIX">PIX</option>
                            <option value="Boleto">Boleto</option>
                        </select>
                    </div>
                </div>

                <div class="total-final">
                    <span>VALOR TOTAL:</span>
                    <strong id="valorTotal">R$ 0,00</strong>
                </div>
            </section>

            <!-- BOT√ïES DE A√á√ÉO -->
            <div class="form-actions">
                <button type="button" class="btn-secondary btn-large" id="btnCancelar">
                    Cancelar
                </button>
                <button type="submit" class="btn-primary btn-large" id="btnSalvar">
                    üíæ Salvar Ordem de Servi√ßo
                </button>
            </div>

        </form>
    </div>

    <!-- Toast para notifica√ß√µes -->
    <div id="toast" class="toast hidden"></div>

    <!-- Loading overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Processando...</p>
    </div>

    <script src="app.js"></script>
</body>
</html>
