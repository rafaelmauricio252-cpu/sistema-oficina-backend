
> teste-endpoints-oficina@1.0.0 test
> node testar-endpoints.js +%Y%m%d-%H%M%S).txt

[36m
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[36mâ•‘                                                           â•‘[0m
[36mâ•‘         ğŸ§ª TESTE COMPLETO DE ENDPOINTS - Ã‰PICO 3         â•‘[0m
[36mâ•‘              Sistema de GestÃ£o de Oficina                â•‘[0m
[36mâ•‘                                                           â•‘[0m
[36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[34m
âš™ï¸  ConfiguraÃ§Ã£o:[0m
[0m   Base URL: http://localhost:3000/api[0m
[0m   Timeout: 5000ms[0m
[0m   Total de endpoints: 34[0m
[33m
ğŸ” Verificando servidor...[0m
[32mâœ… Servidor estÃ¡ rodando!
[0m

============================================================
[36m  ğŸš€ INICIANDO TESTES DOS ENDPOINTS[0m
============================================================
[0mğŸ“ Total de endpoints para testar: 34
[0m

------------------------------------------------------------
[34m  ğŸ‘¥ TESTANDO ENDPOINTS DE CLIENTES[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 1. Criar cliente rÃ¡pido[0m
[0m   MÃ©todo: POST | URL: http://localhost:3000/api/clientes/rapido[0m
[31mâŒ FALHOU![0m
[31m   Status: 400[0m
[31m   Erro: {"erro":"CPF/CNPJ jÃ¡ cadastrado","cliente_existente":{"id":2}}[0m
[33m
ğŸ“ Testando: 2. Buscar cliente (autocomplete)[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/clientes/buscar?q=JoÃ£o[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 2,
  "clientes": [
    {
      "id": 2,
      "nome": "JoÃ£o Da Silva Teste",
      "cpf_cnpj": "12345678909",
      "telefone": "(11) 98765-4321",
      "email": "joao....[0m
[33m
ğŸ“ Testando: 3. Listar todos os clientes[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/clientes[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 2,
  "pagina": 1,
  "total_paginas": 1,
  "clientes": [
    {
      "id": 2,
      "nome": "JoÃ£o Da Silva Teste",
      "cpf_cnpj": "12345678909",
      "tipo_pessoa": ...[0m
[33m
ğŸ“ Testando: 6. Validar CPF invÃ¡lido (deve falhar)[0m
[0m   MÃ©todo: POST | URL: http://localhost:3000/api/clientes/rapido[0m
[32mâœ… PASSOU! Erro esperado: 400[0m

------------------------------------------------------------
[34m  ğŸš— TESTANDO ENDPOINTS DE VEÃCULOS[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 8. Buscar veÃ­culo (autocomplete)[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/veiculos/buscar?q=ABC[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 1,
  "veiculos": [
    {
      "id": 1,
      "cliente_id": 1,
      "placa": "1234",
      "marca": "FIAT",
      "modelo": "Uno",
      "ano": 2020,
      "cor": "Pre...[0m
[33m
ğŸ“ Testando: 13. Validar placa invÃ¡lida (deve falhar)[0m
[0m   MÃ©todo: POST | URL: http://localhost:3000/api/veiculos/rapido[0m
[32mâœ… PASSOU! Erro esperado: 400[0m

------------------------------------------------------------
[34m  ğŸ“¦ TESTANDO ENDPOINTS DE ESTOQUE[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 14. Listar todas as peÃ§as[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/pecas[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 8,
  "pagina": 1,
  "total_paginas": 1,
  "pecas": [
    {
      "id": 8,
      "categoria_id": 4,
      "nome": "Amortecedor Dianteiro",
      "codigo": "AD-001",
    ...[0m
[33m
ğŸ“ Testando: 15. Buscar peÃ§as (autocomplete)[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/pecas/buscar?q=oleo[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 0,
  "pecas": []
}[0m
[33m
ğŸ“ Testando: 18. Listar peÃ§as com estoque baixo[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/estoque/baixo[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 0,
  "pecas": []
}[0m

------------------------------------------------------------
[34m  ğŸ”§ TESTANDO ENDPOINTS AUXILIARES[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 20. Listar mecÃ¢nicos[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/mecanicos[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 3,
  "mecanicos": [
    {
      "id": 3,
      "nome": "Carlos Souza",
      "especialidade": "SuspensÃ£o e Freios",
      "telefone": "(82) 99999-0003",
      "email": ...[0m
[33m
ğŸ“ Testando: 22. Listar serviÃ§os[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/servicos[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 8,
  "servicos": [
    {
      "id": 2,
      "nome": "Alinhamento",
      "descricao": "Alinhamento e balanceamento",
      "preco_padrao": "120.00",
      "tempo_esti...[0m
[33m
ğŸ“ Testando: 23. Buscar serviÃ§os (autocomplete)[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/servicos/buscar?q=troca[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 3,
  "servicos": [
    {
      "id": 6,
      "nome": "Troca de Correia Dentada",
      "descricao": "SubstituiÃ§Ã£o da correia dentada",
      "preco_padrao": "450.00",
...[0m
[33m
ğŸ“ Testando: 25. Listar categorias de serviÃ§os[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/categorias[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 5,
  "categorias": [
    {
      "id": 5,
      "nome": "ElÃ©trica",
      "descricao": "Bateria, velas, cabos"
    },
    {
      "id": 1,
      "nome": "Filtros",
    ...[0m
[33m
ğŸ“ Testando: 26. Buscar estatÃ­sticas do dashboard[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/dashboard[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "estatisticas": {
    "os_por_status": [
      {
        "status": "Em Andamento",
        "total": "1",
        "valor_total": "195.90"
      },
      {
        "status": "Pago...[0m

------------------------------------------------------------
[34m  ğŸ“‹ TESTANDO ENDPOINTS DE ORDEM DE SERVIÃ‡O[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 28. Listar todas as OS[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/os[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 2,
  "pagina": 1,
  "total_paginas": 1,
  "ordem_servicos": [
    {
      "id": 1,
      "numero_os": "OS-2025-00001",
      "cliente_id": 1,
      "veiculo_id": 1,
   ...[0m
[33m
ğŸ“ Testando: 29. Filtrar OS por status[0m
[0m   MÃ©todo: GET | URL: http://localhost:3000/api/os?status=Aguardando[0m
[32mâœ… PASSOU! Status: 200[0m
[0m   Resposta: {
  "sucesso": true,
  "total": 0,
  "pagina": 1,
  "total_paginas": 0,
  "ordem_servicos": []
}[0m

------------------------------------------------------------
[34m  ğŸ“¸ TESTANDO ENDPOINTS DE UPLOAD[0m
------------------------------------------------------------
[33m
ğŸ“ Testando: 34. Deletar foto[0m
[0m   â„¹ï¸  Teste de exclusÃ£o de foto (requer foto existente)[0m
[33m   âš ï¸  PULADO - Execute manualmente apÃ³s upload[0m

------------------------------------------------------------
[34m  ğŸ§¹ LIMPEZA (OPCIONAL)[0m
------------------------------------------------------------
[0m
âš ï¸  Deseja deletar os dados de teste criados?[0m
[33m   Execute manualmente se necessÃ¡rio:[0m

============================================================
[36m  ğŸ“Š RELATÃ“RIO FINAL DOS TESTES[0m
============================================================

ğŸ“ˆ EstatÃ­sticas:
   Total de testes:    17
[32m   âœ… Testes passaram: 16[0m
[31m   âŒ Testes falharam: 1[0m
   ğŸ“Š Taxa de sucesso: 94.1%

ğŸ“ IDs Criados:

ğŸ¯ Resumo:
[33m   âš ï¸  1 teste(s) falharam[0m
[33m   ğŸ“‹ Verifique os logs acima para detalhes[0m

============================================================
[32mâœ… Testes concluÃ­dos![0m
============================================================

